{% extends '::base.html.twig' %}

{% block header %}
	{{ parent() }}

	<!-- google maps v3 -->
	<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
	<style type="text/css">
  		#map_canvas { width:550px;height: 300px; margin-right: auto ;margin-left: auto ; }
	</style>
	<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=true" ></script>
{% endblock %}

 {% block title %}
 EDB Show Epigraph
{% endblock %}

{% block body %}
{% include 'KddeEdbBundle:GeoPosition:modalViewGeoPosition.html.twig' %}
{% include 'KddeEdbBundle:Literature:modalSingleLiterature.html.twig' %}
	<div class="marketing">
		<h2>EDB{{ e.id }}</h2>
		<br>
	</div>
	<div class="row">
				{# <table class="table table-striped table-condensed"> #}
				<table class="table table-condensed tdnb" >
						{% for i in 0..e.pertinence | length - 1%}
							{% set c = e.pertinence[i] %}
							<tr>
								<td>
									{% if i > 0 %}
										<strong>and in </strong> 
									{% endif %}
									Roma 
									{%- if c.pertinenceArea.description != 'n.d.'-%}
										, {{ c.pertinenceArea.description -}}
									{%- endif -%}
									{%- if c.context.description != 'n.d.'-%}
										, <a onClick="showMap('{{ c.context.geoposition | slice(1, c.context.geoposition |length-2 ) }}');" style="cursor: pointer; cursor: hand;"> {{ c.context.description -}} </a>
									{%- endif -%}
									{%- if c.pertinencePosition.description != 'n.d.'-%}
										, {{ c.pertinencePosition.description -}}
									{%- endif -%}
									{%- if c.inSitu == true -%}
										, in situ 
									{%- endif -%} 
								</td> 
							<tr>
						{% endfor %}
						
						<tr>
							<td>
								{{- e.material.support.description }} - {{ e.material.technique.description-}}
								{%- if e.material.height != 'n.d.' or e.material.width != 'n.d.' or e.material.tickness != 'n.d.' -%}
									, 
									{% if e.material.height != 'n.d.' -%} 
										{{- e.material.height -}} 
									{%- else -%} 
										? 
									{%- endif %} 
									x 
									{% if e.material.width != 'n.d.' -%} 
										{{- e.material.width -}} 
									{%- else -%} 
										? 
									{%- endif %}  
									x 
									{% if e.material.tickness != 'n.d.' -%}
										{{- e.material.tickness -}} 
									{%- else -%} 
										? 
									{%- endif -%}
								{%- endif -%}
								{%- if e.altMaxLetters != 'n.d.' or e.altMinLetters != 'n.d.' -%}
									. Letters  
									{% if e.altMaxLetters != 'n.d.' and e.altMinLetters != 'n.d.' -%}	
										({{- e.altMinLetters -}}-{{- e.altMaxletters -}})
									{%- elseif e.altMaxLetters != 'n.d.' -%}
										{{- e.altMaxLetters -}}
									{%- elseif e.altMinLetters != 'n.d.' -%}
										{{- e.altMinLetters -}}
									{%- endif -%}
								{%- endif -%}
							</td>
						</tr>
						
						{% if e.lost == 'S' %}
							<tr>
								<td> Lost </td> 
							</tr>
						{% else %}
							{% for i in 0..e.conservations | length - 1%}
								{% set c = e.conservations[i] %}
								<tr>
									<td> 
										{%- if c.conservationLocation.description != 'n.d.' -%}
											<strong>
											{%- if i == 0 -%}
												Now in 
											{% else -%}
												and in 
											{% endif -%}
											</strong>
											{{- c.conservationLocation.description -}}
											{%- if c.conservationContext.description != 'n.d.' -%}
												, {{ c.conservationContext.description -}}
											{%- endif -%}
											{%- if c.conservationPosition.description != 'n.d.' -%}
												, {{ c.conservationPosition.description -}}
											{%- endif -%}
										{%- endif -%}
									</td> 
								<tr>
							{% endfor %}
						{% endif %}
					
						<tr>
							<td>
								{{ e.funzione.description }}
								{% set datings_present = false %}
								{%- for c in e.datings -%}
									{%- if(c.from != 'n.d.') -%}
										{%-  set datings_present = true -%}
									{%- endif -%}
								{%- endfor -%}
								{%- if datings_present -%}(
									{%- for i in 0..e.datings | length - 1 -%}
										{%- set c = e.datings[i] -%}
										{%- if c.from != 'n.d.' -%}
											{%- if i > 0 %}; {% endif %}
											{%- if c.from == c.to -%}
												{{- c.from -}}
											{%- else -%} 
												{{- c.from -}}-{{- c.to -}}
											{%- endif -%}
										{%- endif -%}
									{%- endfor -%})
								{%- endif -%}
							</td>
						<tr>
						
						<tr>
							<td><strong>Bibliography:</strong> ICVR {{- e.icvr -}}, {{ e.principalProgNumber }} {{ e.subNumeration -}}
							{%- for b in e.literatures -%}
								; <a onClick="showRef('{{ b.idRiferimento.id }}');" style="cursor: pointer; cursor: hand;">{{ b.idRiferimento.id }}</a> {{ b.note -}}
							{% endfor %}
							</td>
						</tr>
			
						{% if imageUrl != null %}
							<tr><td><br></td></tr>
							<tr>
						 		<td>
						 			<div class = "image">
						 				<img src = {{ imageUrl }} width = 300px>
						 			</div>
								</td>
							</tr>						
						{% endif %}	
						<tr><td><br></td></tr>
						
						<tr><td style = "line-height: normal; font-family:Cardo; font-size: 20pt"> {{ e.trascription }} </td></tr>
						
						<tr><td><br></td></tr>
						{% if e.divergentText == 'S' %}
							<tr><td>Transcription different from ICVR</td></tr>
						{% endif %}
						
						{% if e.criticalApparatus != 'n.d.' and e.criticalApparatus != '' %}
							<tr><td>({{ e.criticalApparatus }})</td></tr>
						{% endif %}
						<tr><td><br></td></tr>
						<tr>
							<td>
								{{ e.oldCompilator -}} 
								{%- if e.dataScheda != '' and e.dataScheda != 'n.d.' -%}
									, {{ e.dataScheda }}
								{% endif %}
							</td>
						</tr>
				</table>
	</div>
	<div class="row"></div> 		
{% endblock %}
{% block javascripts %}
		{{ parent() }}
		<script src="{{ asset('js/show.js') }}" type="text/javascript"></script>
{% endblock %}
