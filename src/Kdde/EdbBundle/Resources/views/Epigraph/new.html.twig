{% extends '::base.html.twig' %}

{% block header %}
	{{ parent() }}
	
	<!-- Google maps v3 -->
	<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
	<style type="text/css">
  		#map_canvas { width:550px;height: 300px; margin-right: auto ;margin-left: auto ; }
	</style>
	<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=true" ></script>
{% endblock %}


{% form_theme form 'KddeEdbBundle:Form:fields.html.twig' %}

{% block title %}
 EDB new Epigraph
{% endblock %}

{% block body %}

{% include 'KddeEdbBundle:Literature:modalLiteratures.html.twig' with {'literatures': literatures} %}
{% include 'KddeEdbBundle:Literature:modalNewLiterature.html.twig' %}
{% include 'KddeEdbBundle:GeoPosition:modalNewGeoPosition.html.twig' %}
{% include 'KddeEdbBundle:PertinenceArea:modalNewPertinenceArea.html.twig' %}
{% include 'KddeEdbBundle:PertinenceContext:modalNewPertinenceContext.html.twig' %}
{% include 'KddeEdbBundle:PertinencePosition:modalNewPertinencePosition.html.twig' %}
{% include 'KddeEdbBundle:ConservationLocation:modalNewConservationLocation.html.twig' %}
{% include 'KddeEdbBundle:ConservationContext:modalNewConservationContext.html.twig' %}
{% include 'KddeEdbBundle:ConservationPosition:modalNewConservationPosition.html.twig' %}
{% include 'KddeEdbBundle:Support:modalNewSupport.html.twig' %}
{% include 'KddeEdbBundle:Technique:modalNewTechnique.html.twig' %}
{% include 'KddeEdbBundle:Paleography:modalNewPaleography.html.twig' %}
{% include 'KddeEdbBundle:Function:modalNewFunction.html.twig' %}
{% include 'KddeEdbBundle:OnomasticArea:modalNewOnomasticArea.html.twig' %}
{% include 'KddeEdbBundle:Signa:modaViewSignas.html.twig' %}
{% include 'KddeEdbBundle:Signa:modalNewSigna.html.twig' %}

	<div class="marketing">
		<h2>New Epigraph</h2>
		<br>
	</div>
	
	<div class="row">
		<div class="offset1">
			<form class="" action="{{ path('edb_epigraph_new')}}" method="post" {{ form_enctype(form) }}>
				{{ form_errors(form) }}				
				
				<div class="row">
					<h3>Bibliography</h3>
				</div>
				<div class="row">
					<!--  visualizzare il numero di record in edb dopo il salvataggio -->
					<div class="span2">
						<label>Volume ICVR</label>
						<select class="span2" id="epigraph_icvr" name="epigraph[icvr]" required="required">
							{% for icvr in icvrs %}
								<option value="{{ icvr.id }}"> {{ icvr.volume }}</option>
							{% endfor %}
						
						</select>
					</div>
					
					<div class="span2">
						<label>Number</label> <input type="text"
							name="epigraph[principalProgNumber]" class="span2">
					</div>

					<div class="span2">
						<label>Sub Number</label> <input type="text"
							name="epigraph[subNumeration]" class="span2">
					</div>

					<div class="span4" id="div_biblio">
						<label>Literature Reference</label>
						<textarea name="epigraph[literaturesTextArea]" id="literature" class="span3" rows="4"></textarea>
						<a id="addLiteratureRef" class="btn">Add Reference</a> 
						<a id="newLiterature" class="btn">New Literature</a>
					</div>
				</div>
				
				<div class="row">
					<h3>Pertinence</h3>
				</div>

				<div class="row">
					<div class="span2">
						<label>Locus Inventionis</label> <input type="text" class="span2"
							value="Roma" disabled="disabled" name="epigraph[pertinence][locus]"> 
{# 							<input id="locus" type="hidden" name="epigraph[pertinence[locus]"#}
{# 							value="Roma">#}

					</div>
				</div>
				<br />
				<div class="row">
					<div class="span2">
						<label>Area</label> <select id="selectPertinenceArea"
							class="span2" name="epigraph[pertinence][pertinenceArea]" required="required">
							<option></option>
						</select>
					</div>
					<div class="span2">
						<label>Context</label> <select id="selectPertinenceContext"
							class="span2" name="epigraph[pertinence][context]" required="required">
							<option></option>
						</select>
					</div>

					<div class="span2">
						<label>Position</label> <select id="selectPertinencePosition"
							class="span2" name="epigraph[pertinence][pertinencePosition]" required="required">
							<option></option>
						</select>
					</div>

					<div class="span1">
						<label for="insitu">In situ</label><input type="checkbox"
							id="insitu" name="epigraph[pertinence][inSitu]">
					</div>

				</div>
				<br />
				<div class="row">
					<div class="span4">
						<label>Geographic position <em>(latitude,longitude)</em></label> 
						<input type="text" class="span4" value="" id="fld_geoPosition" name="epigraph[geoPosition]" />
						<a id="newGeoPosition" class="btn" title="Get geographic position from map" >Show Map</a>						
					</div>
				</div>
				
				<hr>
				
				<div class="row">
					<h3>Conservation</h3>
				</div>

				<div class="row">
					<div class="span2">
						<label>Location</label> <select id="selectConservationLocation"
							class="span2" >
							<option></option>
						</select>
					</div>
					<div class="span2">
						<label>Context</label> <select id="selectConservationContext"
							class="span2">
							<option></option>
						</select>
					</div>

					<div class="span2">
						<label>Position</label> <select id="selectConservationPosition"
							class="span2">
							<option></option>
						</select>
					</div>

					<div class="span1">
						<label for="perduta">Lost</label><input type="checkbox"
							name="epigraph[lost]" id="lost">
					</div>
					<div class="span1 offset1">
						<p></p>
						<button class="btn btn-small btn-warning span1" type="button"
							id="addConservationToTable">Add</button>
					</div>
				</div>
				<br> <br>
				<div class="row">
					<div class="span10">
						<table class="table table-condensed table-bordered"
							id="tableConservations">
							<thead>
								<tr>
									<th class="span3">Location</th>
									<th class="span4">Context</th>
									<th class="span3">Position</th>
									<th class="span2">Delete</th>
								</tr>
							</thead>
							<tbody>
							</tbody>
						</table>
					</div>
				</div>
				<hr>
				
				<div class="row">
					<h3>Used Material</h3>
				</div>

				<div class="row ">
					<div class="span2">
						<label>Support</label> <select id="selectSupport" class="span2"
							name="epigraph[material][support]"> 
							{% for supp in supports %}
								<option value="{{ supp.id }}"> {{ supp.description }}</option>
							{% endfor %}
								<option value="-1"> Add New </option>
						</select>
					</div>
					<div class="span2">
						<label>Technique</label> <select id="selectTechnique"
							class="span2" name="epigraph[material][technique]">
							{% for tech in techniques %}
								<option value="{{ tech.id }}"> {{ tech.description }}</option>
							{% endfor %}
								<option value="-1"> Add New </option>
						</select>
					</div>

					<div class="span1 offset1">
						<label>Height</label> <input type="text" name="epigraph[material][height]"
							class="span1">
					</div>

					<div class="span1">
						<label>Width</label> <input type="text" name="epigraph[material][width]"
							class="span1">
					</div>

					<div class="span1">
						<label>Tickness</label> <input type="text" name="epigraph[material][tickness]"
							class="span1">
					</div>
				</div>
				<hr>
				
				<div class="row">
					<h3>Other Characteristics</h3>
				</div>

				<div class="row">
					<div class="span0 offset0">
						<label>Height letters:</label>
					</div>

					<div class="span1">
						<label>minimum</label> <input type="text" name="epigraph[altMinLetters]"
							class="span1">
					</div>

					<div class="span1">
						<label>maximum</label> <input type="text" name="epigraph[altMaxLetters]"
							class="span1">
					</div>

					<div class="span2 offset1">
						<label>Paleography</label> <select
							id="selectPaleography" class="span2" name="epigraph[paleography]">
							{% for pal in paleographies %}
								<option value="{{ pal.id }}"> {{ pal.description }}</option>
							{% endfor %}
								<option value="-1"> Add New </option>
						</select>
					</div>

					<div class="span2 offset1">
						<label>Function</label> <select id="selectFunction" class="span2"
							name="epigraph[funzione]">
							{% for fun in functions %}
								<option value="{{ fun.id }}"> {{ fun.description }}</option>
							{% endfor %}
								<option value="-1"> Add New </option>
						</select>
					</div>

				</div>
				<hr>
				
				<div class="row">
					<h3>Text</h3>
				</div>
				<div class="row">
					<div class="span6">
						<button id="greekToogle" type="button" class="btn" data-toggle="button">Click to write in Greek</button>
					</div>
					
					<div class="span2">
						<label>Onomastic Area</label> <select id="selectOnomasticArea"
							class="span2" name="epigraph[ambitoOnomastico]">
							{% for o in onomasticAreas %}
								<option value="{{ o.id }}"> {{ o.description }}</option>
							{% endfor %}
								<option value="-1"> Add New </option>
						</select>
					</div>
				</div>
				<div class="row">

					<div class="span6">
						<label>Transcription</label>
						<textarea class="span6" rows="10" name="epigraph[transcription]" id="transcription" 
						onselect="storeCaret(this);" onclick="storeCaret(this);" 
						onchange="if (navigator.userAgent.indexOf(&#39;Opera&#39;) &gt; -1) doit();" required="required"></textarea>
					</div>



					<div class="span5" id="divSigna">
						<label>Signum Christi</label> 
						<select id="selectSigna"
							multiple="multiple" class="span3" name="epigraph[signas][]">
						</select>
						<br>
						<a id="addSigna" class="btn">Add</a> 
						<a id="newSigna" class="btn">New</a>
						<a id="removeSigna" class="btn">Remove Selected</a>
					</div>

				</div>
				<div class="row">
					<div class="span4">
						<button type="button" unselectable="on"
							onclick="replaceSelection (document.getElementById('transcription'), '&#803;');">&#046;</button>

						<button type="button" unselectable="on"
							onclick="replaceSelection (document.getElementById('transcription'), '&#818;');">&#095;</button>

						<button type="button" unselectable="on"
							onclick="replaceSelection (document.getElementById('transcription'), '&#773;');">&#175;</button>

						<button type="button" unselectable="on"
							onclick="replaceSelection (document.getElementById('transcription'), '&#770;');">&#094;</button>

						<button type="button" unselectable="on"
							onclick="replaceSelection (document.getElementById('transcription'), '&#769;');">&#180;</button>

						<button type="button" unselectable="on"
							onclick="replaceSelection (document.getElementById('transcription'), '&#768;');">&#096;</button>

						<button type="button" unselectable="on"
							onclick="replaceSelection (document.getElementById('transcription'), '&#12314;');">[[</button>

						<button type="button" unselectable="on"
							onclick="replaceSelection (document.getElementById('transcription'), '&#12315;');">]]</button>

						<button type="button" unselectable="on"
							onclick="replaceSelection (document.getElementById('transcription'), '&#12296;');">&#060;</button>

						<button type="button" unselectable="on"
							onclick="replaceSelection (document.getElementById('transcription'), '&#12297;');">&#062;</button>

						<button type="button" unselectable="on"
							onclick="replaceSelection (document.getElementById('transcription'), '&#12298;');">&#171;</button>

						<button type="button" unselectable="on"
							onclick="replaceSelection (document.getElementById('transcription'), '&#12299;');">&#187;</button>

						<button type="button" unselectable="on" span class="greco"
							onclick="replaceSelection (document.getElementById('transcription'), '&#8988;');">&#8988;</button>

						<button type="button" unselectable="on" span class="greco"
							onclick="replaceSelection (document.getElementById('transcription'), '&#8989;');">&#8989;</button>
						<br>
						<button type="button" unselectable="on"
							onclick="replaceSelection (document.getElementById('transcription'), '&#96;');">&#96;</button>

						<button type="button" unselectable="on"
							onclick="replaceSelection (document.getElementById('transcription'), '&#180;');">&#180;</button>

						<button type="button" unselectable="on"
							onclick="replaceSelection (document.getElementById('transcription'), '&#123;');">&#123;</button>

						<button type="button" unselectable="on"
							onclick="replaceSelection (document.getElementById('transcription'), '&#125;');">&#125;</button>

						<button type="button" unselectable="on"
							onclick="replaceSelection (document.getElementById('transcription'), '&#183;');">&#183;</button>

						<button type="button" unselectable="on"
							onclick="replaceSelection (document.getElementById('transcription'), '&#834;');">
							<font color="red">&nbsp;&#834;</FONT>
						</button>

						<button type="button" unselectable="on"
							onclick="replaceSelection (document.getElementById('transcription'), '&#772;');">
							<font color="red">&nbsp;&#772;</font>
						</button>
					</div>
				</div>
				<br />
				<div class="row">

					<div class="span1">
						<label>Opistografia</label> <input type="checkbox"
							name="epigraph[reimpiego_opistografia]" id="checkboxOpistografia">
					</div>

					<div class="span2 offset1">
						<label>Testo metrico</label> <input type="checkbox"
							name="epigraph[metricText]" id="checkboxMetricText">
					</div>

					<div class="span3">
						<label>presence of elements in greek</label> <input
							type="checkbox" name="epigraph[greek]" id="checkboxGreek">
					</div>

					<div class="span2">
						<label>Presence of latin/greek</label> <input type="checkbox"
							name="epigraph[presenceLG]" id="checkboxPresenceLG">
					</div>

				</div>

				<hr>
				
				<div class="row">
					<h3>When</h3>
				</div>

				<div class="row">

					<div class="span2">
						<label>Dating</label> <select id="selectDating"
							class="span3" name="epigraph[dating]">
							{% for d in datings %}
								<option value="{{ d.id }}">{{ d.description }}</option>
							{% endfor %}
							
						</select>
					</div>

					<div class="span2 offset1">
						<label>Precise Year</label> <input type="checkbox"
							id="checkPreciseYear" name="epigraph[adAnnum]">
					</div>

					<div class="span2">
						<label>From</label> <input id="inputAnnumFrom" name="epigraph[from]" type="text"
							class="span2" disabled="disabled">
					</div>
					
					<div class="span2 offset1">
						<label>To</label> <input id="inputAnnumTo" name="epigraph[to]" type="text"
							class="span2" disabled="disabled">
					</div>

				</div>

				<hr>

				<div class="row">
					<h3>Comments</h3>
				</div>

				<div class="row">

					<div class="span4">
						<label>Critical Apparatus</label>
						<textarea rows="3" name="epigraph[criticalApparatus]" class="span4"></textarea>
					</div>

					<div class="span2">
						<label>Divergent Text</label> <input type="checkbox"
							name="epigraph[divergentText]" id="inputDivergentText">
					</div>

					<div class="span4">
						<label>Notes</label>
						<textarea rows="3" name="epigraph[comment]" class="span4"></textarea>
					</div>
				</div>

				<hr>
				
    			{{ form_rest(form) }}
    			
    				<div class="">
				      <button type="submit" class="btn">Submit</button>
				    </div>
			</form>
		</div>
	</div>
	
{% endblock %}

{% block javascripts %}
	
		{{ parent() }}
		
		 <script src="{{ asset('js/create.js') }}"></script>
		 <script src="{{ asset('js/keyboard.js') }}"></script>
{% endblock %}
